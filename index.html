<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Sonderproben Anmeldung Feuerwehr Breisach</title>
<style>
body { font-family: Arial; margin:20px; }
select, div, input { margin-top:10px; display:block; }
.theme { padding:5px; border:1px solid #ccc; margin-bottom:5px; }
</style>
</head>
<body>
<h1>Sonderproben Anmeldung Feuerwehr Breisach</h1>

<label for="probe">Sonderprobe ausw√§hlen:</label>
<select id="probe"></select>

<h2>Themen:</h2>
<div id="themes"></div>

<label for="name">Dein Name:</label>
<input id="name" type="text" placeholder="Name">

<button id="register">Anmelden</button>

<script>
// JSON-Datei laden
fetch('data.json')
  .then(res => res.json())
  .then(data => {
    window.probes = data.probes;
    const probeSelect = document.getElementById('probe');
    data.probes.forEach(p=>{
      const opt = document.createElement('option');
      opt.value = p.id;
      opt.textContent = p.title;
      probeSelect.appendChild(opt);
    });
    loadThemes(data.probes[0].id);
  });

function loadThemes(probeId){
  const themesDiv = document.getElementById('themes');
  themesDiv.innerHTML = '';
  const probe = window.probes.find(p => p.id==probeId);
  probe.themes.forEach(t=>{
    const div = document.createElement('div');
    div.className = 'theme';
    div.textContent = `${t.name} (max ${t.max} Teilnehmer)`;
    div.dataset.themeId = t.id;
    themesDiv.appendChild(div);
  });
}

// Dropdown-Event
document.getElementById('probe').addEventListener('change', e => {
  loadThemes(e.target.value);
});

// Anmelde-Button (nur Demo)
document.getElementById('register').addEventListener('click', ()=>{
  const name = document.getElementById('name').value;
  const probeId = document.getElementById('probe').value;
  if(!name){ alert('Bitte Name eingeben'); return; }
  alert(`Danke ${name}, du wurdest angemeldet! (Demo)`);
});
</script>
</body>
</html>
